# ============================================
# RAG-GDGS Docker Compose 环境变量配置模板
# ============================================
# 说明：
# 1. 复制此文件为 .env：cp .env.example .env
# 2. 修改 .env 文件中的配置值
# 3. 修改后重新启动服务：docker-compose down && docker-compose up -d
# 4. .env 文件已在 .gitignore 中排除，不会提交到代码仓库
# ============================================

# ============================================
# 基础配置
# ============================================
# 时区配置（所有服务共用）
TZ=Asia/Shanghai

# ============================================
# 存储路径配置
# ============================================
# 所有数据存储的根路径前缀
# 默认值：/data/rag-gdgs
# 建议：生产环境使用独立数据盘，如 /data-disk/rag-gdgs
RAG_GDGS_STORAGE_PATH=/data/rag-gdgs

# ============================================
# MySQL 配置
# ============================================
# MySQL root 用户密码
# ⚠️ 生产环境必须修改为强密码
MYSQL_ROOT_PASSWORD=root

# MySQL 数据库名称
MYSQL_DATABASE=rag_gdgs

# ============================================
# RabbitMQ 配置（容器服务）
# ============================================
# RabbitMQ 默认用户名
RABBITMQ_DEFAULT_USER=rabbitmq

# RabbitMQ 默认密码
# ⚠️ 生产环境建议修改为强密码
RABBITMQ_DEFAULT_PASS=rabbitmq

# RabbitMQ 虚拟主机
RABBITMQ_DEFAULT_VHOST=/rag-gdgs

# ============================================
# 应用服务配置
# ============================================
# Spring Boot Profile
# 可选值：dev, pro
SPRING_PROFILES_ACTIVE=pro

# ============================================
# LangChain4j 配置
# ============================================
# LangChain4j OpenAI Chat Model API Key
# ⚠️ 生产环境必须通过环境变量配置，不要硬编码
RAG_GDGS_LANGCHAIN4J_OPEN_AI_CHAT_MODEL_API_KEY=

# ============================================
# JWT 配置
# ============================================
# JWT Access Token 过期时间（天）
RAG_GDGS_JWT_ACCESS_EXPIRE=1

# JWT Refresh Token 过期时间（天）
RAG_GDGS_JWT_REFRESH_EXPIRE=7

# JWT 签名密钥
# ⚠️ 生产环境必须通过环境变量配置，不要硬编码
RAG_GDGS_JWT_SECURITY=

# ============================================
# 用户配置
# ============================================
# 用户密码最小长度
RAG_GDGS_USER_PASSWORD_LENGTH=6

# ============================================
# Redis 配置（应用连接）
# ============================================
# Redis 主机地址
# Docker 环境应使用服务名：rag-gdgs-redis
RAG_GDGS_REDIS_HOST=rag-gdgs-redis

# Redis 端口
RAG_GDGS_REDIS_PORT=6379

# ============================================
# 数据库配置（应用连接）
# ============================================
# 数据库用户名
RAG_GDGS_DATASOURCE_USERNAME=root

# 数据库密码
# ⚠️ 生产环境必须通过环境变量配置，不要硬编码
RAG_GDGS_DATASOURCE_PASSWORD=

# ============================================
# RabbitMQ 配置（应用连接）
# ============================================
# RabbitMQ 主机地址
# Docker 环境应使用服务名：rag-gdgs-rabbitmq
RAG_GDGS_RABBITMQ_HOST=rag-gdgs-rabbitmq

# RabbitMQ 端口
RAG_GDGS_RABBITMQ_PORT=5672

# RabbitMQ 用户名
RAG_GDGS_RABBITMQ_USERNAME=rabbitmq

# RabbitMQ 密码
# ⚠️ 生产环境建议通过环境变量配置
RAG_GDGS_RABBITMQ_PASSWORD=rabbitmq

# ============================================
# 文件存储配置
# ============================================
# 文件存储路径
# 生产环境默认：/app/files（容器内绝对路径）
# 开发环境默认：./files（相对于项目根目录）
RAG_GDGS_FILE_STORAGE_PATH=/app/files

# ============================================
# 文件上传配置
# ============================================
# 单个文件最大大小
# 生产环境默认：200MB
# 开发环境默认：100MB
RAG_GDGS_MULTIPART_MAX_FILE_SIZE=200MB

# 请求最大大小（可包含多个文件）
# 生产环境默认：1000MB
# 开发环境默认：200MB
RAG_GDGS_MULTIPART_MAX_REQUEST_SIZE=1000MB

# ============================================
# 使用说明
# ============================================
#
# 1. 修改配置后，重新启动服务：
#    docker-compose down
#    docker-compose up -d
#
# 2. 创建存储目录（使用配置的存储路径）：
#    STORAGE_PATH=${RAG_GDGS_STORAGE_PATH:-/data/rag-gdgs}
#    sudo mkdir -p ${STORAGE_PATH}/{mysql/logs,redis/logs,rabbitmq/logs,logs,files}
#    sudo chown -R 1000:1000 ${STORAGE_PATH}
#
# 3. 生产环境建议：
#    - 修改 MYSQL_ROOT_PASSWORD 为强密码
#    - 修改 RABBITMQ_DEFAULT_PASS 为强密码
#    - 修改 RAG_GDGS_RABBITMQ_PASSWORD 为强密码
#    - 设置 RAG_GDGS_LANGCHAIN4J_OPEN_AI_CHAT_MODEL_API_KEY
#    - 设置 RAG_GDGS_JWT_SECURITY 为强密钥
#    - 设置 RAG_GDGS_DATASOURCE_PASSWORD 为强密码
#    - 将 RAG_GDGS_STORAGE_PATH 设置为独立数据盘路径
#    - 使用环境变量管理敏感信息（不要硬编码在文件中）
# ============================================
